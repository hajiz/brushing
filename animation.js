function animation () {
	this.log = [{"action":"Question 1","time":"Wed Jul 18 2012 12:16:57 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Argentina\"]}}","time":"Wed Jul 18 2012 12:17:00 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Brazil\"]}}","time":"Wed Jul 18 2012 12:17:05 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 5.173 seconds from Wed Jul 18 2012 12:17:00 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:05 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"China\"]}}","time":"Wed Jul 18 2012 12:17:07 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 5.403 seconds from Wed Jul 18 2012 12:17:07 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:12 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Costa Rica\"]}}","time":"Wed Jul 18 2012 12:17:12 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 5.591 seconds from Wed Jul 18 2012 12:17:07 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:12 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 8.331 seconds from Wed Jul 18 2012 12:17:12 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:20 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Dominican Republic\"]}}","time":"Wed Jul 18 2012 12:17:21 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 8.543 seconds from Wed Jul 18 2012 12:17:12 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:21 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 12.299 seconds from Wed Jul 18 2012 12:17:21 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:33 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"India\"]}}","time":"Wed Jul 18 2012 12:17:33 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 12.536 seconds from Wed Jul 18 2012 12:17:21 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:33 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 5.92 seconds from Wed Jul 18 2012 12:17:33 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:39 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Panama\"]}}","time":"Wed Jul 18 2012 12:17:40 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 6.269 seconds from Wed Jul 18 2012 12:17:33 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:40 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 6.431 seconds from Wed Jul 18 2012 12:17:39 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:46 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Turkey\"]}}","time":"Wed Jul 18 2012 12:17:46 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 6.63 seconds from Wed Jul 18 2012 12:17:40 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:46 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 6.258 seconds from Wed Jul 18 2012 12:17:46 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:52 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 7.731 seconds from Wed Jul 18 2012 12:17:46 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:17:54 GMT-0700 (Pacific Daylight Time)"},{"action":"Question 2","time":"Wed Jul 18 2012 12:17:55 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Year\":{\"isrange\":false,\"values\":[2010]}}","time":"Wed Jul 18 2012 12:18:00 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 6.538 seconds from Wed Jul 18 2012 12:18:01 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:18:08 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 9.001 seconds from Wed Jul 18 2012 12:18:00 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:18:09 GMT-0700 (Pacific Daylight Time)"},{"action":"Question 3","time":"Wed Jul 18 2012 12:18:10 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:18:16 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 6.083 seconds from Wed Jul 18 2012 12:18:10 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:18:16 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 7.683 seconds from Wed Jul 18 2012 12:18:19 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:18:26 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:18:27 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 11.079 seconds from Wed Jul 18 2012 12:18:16 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:18:27 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[3]}}","time":"Wed Jul 18 2012 12:18:29 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[4]}}","time":"Wed Jul 18 2012 12:18:31 GMT-0700 (Pacific Daylight Time)"},{"action":"Question 4","time":"Wed Jul 18 2012 12:18:38 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Board\"]}}","time":"Wed Jul 18 2012 12:18:45 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 6.413 seconds from Wed Jul 18 2012 12:18:38 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:18:45 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Others\"]}}","time":"Wed Jul 18 2012 12:18:50 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 5.311 seconds from Wed Jul 18 2012 12:18:45 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:18:50 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Board\"]}}","time":"Wed Jul 18 2012 12:18:53 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Others\"]}}","time":"Wed Jul 18 2012 12:18:54 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Board\"]}}","time":"Wed Jul 18 2012 12:18:55 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 8.791 seconds from Wed Jul 18 2012 12:18:54 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:19:03 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Others\"]}}","time":"Wed Jul 18 2012 12:19:03 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 8.666 seconds from Wed Jul 18 2012 12:18:55 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:19:04 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Board\"]}}","time":"Wed Jul 18 2012 12:19:05 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:19:07 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:19:08 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {}","time":"Wed Jul 18 2012 12:19:08 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[3]}}","time":"Wed Jul 18 2012 12:19:09 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[4]}}","time":"Wed Jul 18 2012 12:19:09 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:19:11 GMT-0700 (Pacific Daylight Time)"},{"action":"Question 5","time":"Wed Jul 18 2012 12:19:15 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Brokered?\":{\"isrange\":false,\"values\":[\"Yes\"]}}","time":"Wed Jul 18 2012 12:19:22 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 7.873 seconds from Wed Jul 18 2012 12:19:15 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:19:23 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Others\"]}}","time":"Wed Jul 18 2012 12:19:25 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {}","time":"Wed Jul 18 2012 12:19:28 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Brokered?\":{\"isrange\":false,\"values\":[\"Yes\"]}}","time":"Wed Jul 18 2012 12:19:29 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Decision Authority\":{\"isrange\":false,\"values\":[\"Others\"]}}","time":"Wed Jul 18 2012 12:19:30 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Brokered?\":{\"isrange\":false,\"values\":[\"Yes\"]}}","time":"Wed Jul 18 2012 12:19:33 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 7.953 seconds from Wed Jul 18 2012 12:19:32 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:19:40 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 8.355 seconds from Wed Jul 18 2012 12:19:33 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:19:41 GMT-0700 (Pacific Daylight Time)"},{"action":"Question 6","time":"Wed Jul 18 2012 12:19:43 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:19:49 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 6.392 seconds from Wed Jul 18 2012 12:19:43 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:19:50 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:19:50 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:19:51 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:19:52 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:19:53 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:19:54 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:19:55 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:19:56 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 5.193 seconds from Wed Jul 18 2012 12:19:59 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:20:04 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:20:04 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 8.422 seconds from Wed Jul 18 2012 12:19:56 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:20:05 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:20:05 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:20:06 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:20:07 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:20:12 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:20:13 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Panama\"]}}","time":"Wed Jul 18 2012 12:20:16 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Country\":{\"isrange\":false,\"values\":[\"Costa Rica\"]}}","time":"Wed Jul 18 2012 12:20:19 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[2]}}","time":"Wed Jul 18 2012 12:20:20 GMT-0700 (Pacific Daylight Time)"},{"action":"selection changed to {\"Quarter\":{\"isrange\":false,\"values\":[1]}}","time":"Wed Jul 18 2012 12:20:21 GMT-0700 (Pacific Daylight Time)"},{"action":"Mouse stopped for 6.428 seconds from Wed Jul 18 2012 12:20:20 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:20:27 GMT-0700 (Pacific Daylight Time)"},{"action":"No click for 7.002 seconds from Wed Jul 18 2012 12:20:21 GMT-0700 (Pacific Daylight Time)","time":"Wed Jul 18 2012 12:20:28 GMT-0700 (Pacific Daylight Time)"},{"action":"Question -1","time":"Wed Jul 18 2012 12:20:30 GMT-0700 (Pacific Daylight Time)"}]
	this.current_timer = null;
	this.current_index = 0;
	this.running = false;
	this.speed = 1.5;
	// setTimeout(action, milis)
	// clearTimeout(variable)
	this.play = function () {
		this.running = true;
		this.next();
	};
	this.pause = function () {
		this.running = false;
		clearTimeout(this.current_timer);
	};
	this.stop = function () {
		this.running = false;
		clearTimeout(this.current_timer);
		this.current_index = 0;
	};
	
	this.next = function () {
		if (! this.running)
			return;
		if (this.current_index >= this.log.length) {
			this.stop();
			return;
		}
		var action = this.log[this.current_index].action;
		this.execute(action);
		if (this.current_index >= this.log.length - 1) {
			return;
		}
		var diff = new Date(this.log[this.current_index + 1].time).getTime() - new Date(this.log[this.current_index].time).getTime();
		diff = diff / this.speed;
		this.current_index ++;
		var obj = this;
		this.current_timer = setTimeout(function () { obj.next(); }, diff);
	};
	
	this.execute = function (action) {
		if (action.indexOf("Question ") == 0) {
			$("input#question").val(action.substring("Question ".length));
			return;
		}
		if (action.indexOf("selection changed to ") != 0)
			return;
		var json = JSON.parse(action.substring("selection changed to ".length));
		base_selection.selection = json;
		if (window.base_selection)
			log("selection changed to " + JSON.stringify(base_selection.selection));
		hub.broadcast();
		//alert(json);
	};
}
